################################################################################
# Copyright (c) 2020-2021 Bayerische Motoren Werke Aktiengesellschaft (BMW AG)
#
# This program and the accompanying materials are made available under the
# terms of the Eclipse Public License 2.0 which is available at
# http://www.eclipse.org/legal/epl-2.0.
#
# SPDX-License-Identifier: EPL-2.0
################################################################################
set(COMPONENT_NAME SimulationCore)

add_subdirectory(modules)

add_openpass_target(
  NAME ${COMPONENT_NAME} TYPE library LINKAGE shared COMPONENT common

  HEADERS
    opSimulation.h
    bindings/dataBuffer.h
    bindings/dataBufferBinding.h
    bindings/dataBufferLibrary.h
    bindings/eventDetectorBinding.h
    bindings/eventDetectorLibrary.h
    bindings/manipulatorBinding.h
    bindings/manipulatorLibrary.h
    bindings/modelBinding.h
    bindings/modelLibrary.h
    bindings/observationBinding.h
    bindings/observationLibrary.h
    bindings/spawnPointBinding.h
    bindings/spawnPointLibrary.h
    bindings/stochastics.h
    bindings/stochasticsBinding.h
    bindings/stochasticsLibrary.h
    bindings/world.h
    bindings/worldBinding.h
    bindings/worldLibrary.h
    framework/agentBlueprintProvider.h
    framework/agentDataPublisher.h
    framework/agentFactory.h
    framework/commandLineParser.h
    framework/configurationContainer.h
    framework/directories.h
    framework/dynamicAgentTypeGenerator.h
    framework/dynamicParametersSampler.h
    framework/dynamicProfileSampler.h
    framework/eventNetwork.h
    framework/frameworkModuleContainer.h
    framework/observationModule.h
    framework/observationNetwork.h
    framework/parameterbuilder.h
    framework/runInstantiator.h
    framework/sampler.h
    framework/scheduler/agentParser.h
    framework/scheduler/runResult.h
    framework/scheduler/scheduler.h
    framework/scheduler/schedulerTasks.h
    framework/scheduler/taskBuilder.h
    framework/scheduler/tasks.h
    importer/importerCommon.h
    importer/configurationFiles.h
    importer/connection.h
    importer/csvParser.h
    importer/eventDetectorImporter.h
    importer/frameworkModules.h
    importer/importerLoggingHelper.h
    importer/junction.h
    importer/oscImporterCommon.h
    importer/parameterImporter.h
    importer/profiles.h
    importer/profilesImporter.h
    importer/road.h
    importer/scenario.h
    importer/scenarioImporter.h
    importer/scenarioImporterHelper.h
    importer/scenery.h
    importer/sceneryDynamics.h
    importer/sceneryImporter.h
    importer/simulationConfig.h
    importer/simulationConfigImporter.h
    importer/systemConfig.h
    importer/systemConfigImporter.h
    importer/vehicleModels.h
    importer/vehicleModelsImporter.h
    importer/road/roadObject.h
    importer/road/roadSignal.h
    modelElements/agent.h
    modelElements/agentBlueprint.h
    modelElements/agentType.h
    modelElements/channel.h
    modelElements/channelBuffer.h
    modelElements/component.h
    modelElements/componentType.h
    modelElements/eventDetector.h
    modelElements/eventDetectorNetwork.h
    modelElements/manipulator.h
    modelElements/manipulatorNetwork.h
    modelElements/parameters.h
    modelElements/spawnItemParameter.h
    modelElements/spawnPoint.h
    modelElements/spawnPointNetwork.h
    ../common/log.h

  SOURCES
    bindings/dataBufferBinding.cpp
    bindings/dataBufferLibrary.cpp
    bindings/eventDetectorBinding.cpp
    bindings/eventDetectorLibrary.cpp
    bindings/manipulatorBinding.cpp
    bindings/manipulatorLibrary.cpp
    bindings/modelBinding.cpp
    bindings/modelLibrary.cpp
    bindings/observationBinding.cpp
    bindings/observationLibrary.cpp
    bindings/spawnPointBinding.cpp
    bindings/spawnPointLibrary.cpp
    bindings/stochasticsBinding.cpp
    bindings/stochasticsLibrary.cpp
    bindings/worldBinding.cpp
    bindings/worldLibrary.cpp
    framework/agentBlueprintProvider.cpp
    framework/agentDataPublisher.cpp
    framework/agentFactory.cpp
    framework/commandLineParser.cpp
    framework/configurationContainer.cpp
    framework/directories.cpp
    framework/dynamicAgentTypeGenerator.cpp
    framework/dynamicParametersSampler.cpp
    framework/dynamicProfileSampler.cpp
    framework/eventNetwork.cpp
    framework/frameworkModuleContainer.cpp
    framework/observationModule.cpp
    framework/observationNetwork.cpp
    framework/runInstantiator.cpp
    framework/sampler.cpp
    framework/scheduler/agentParser.cpp
    framework/scheduler/runResult.cpp
    framework/scheduler/scheduler.cpp
    framework/scheduler/schedulerTasks.cpp
    framework/scheduler/taskBuilder.cpp
    framework/scheduler/tasks.cpp
    importer/connection.cpp
    importer/csvParser.cpp
    importer/eventDetectorImporter.cpp
    importer/importerCommon.cpp
    importer/junction.cpp
    importer/oscImporterCommon.cpp
    importer/parameterImporter.cpp
    importer/profiles.cpp
    importer/profilesImporter.cpp
    importer/road.cpp
    importer/scenario.cpp
    importer/scenarioImporter.cpp
    importer/scenarioImporterHelper.cpp
    importer/scenery.cpp
    importer/sceneryDynamics.cpp
    importer/sceneryImporter.cpp
    importer/simulationConfig.cpp
    importer/simulationConfigImporter.cpp
    importer/systemConfig.cpp
    importer/systemConfigImporter.cpp
    importer/vehicleModels.cpp
    importer/vehicleModelsImporter.cpp
    importer/road/roadObject.cpp
    importer/road/roadSignal.cpp
    modelElements/agent.cpp
    modelElements/agentBlueprint.cpp
    modelElements/agentType.cpp
    modelElements/channel.cpp
    modelElements/component.cpp
    modelElements/componentType.cpp
    modelElements/dataBuffer.cpp
    modelElements/eventDetectorNetwork.cpp
    modelElements/manipulatorNetwork.cpp
    modelElements/parameters.cpp
    modelElements/spawnPointNetwork.cpp
    ../common/log.cpp

  INCDIRS
    .
    ../..
    ../../../..
    ../common
    framework
    importer
    modelElements
    modules

  LIBRARIES
    Qt5::Core
    Qt5::Xml
    Qt5::XmlPatterns
    Boost::headers
    Common
    CoreCommon
)

set(COMPONENT_NAME opSimulation)

add_openpass_target(
  NAME ${COMPONENT_NAME} TYPE executable COMPONENT bin

  HEADERS

  SOURCES
    framework/main.cpp

  LIBRARIES
    SimulationCore

  INCDIRS
    .
    ../../../..
    ../common
    bindings
    framework
    importer
    modelElements
    modules
)
